"""
–ë–´–°–¢–†–´–ô –°–¢–ê–†–¢ - –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞ –ö–ª–µ–º–µ–Ω—Ç—å–µ–≤–∞ –ê.–ê.

–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ—à–∞–≥–æ–≤—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—É–¥–µ–Ω—Ç–∞
—Å —Å–∏–º—É–ª—è—Ü–∏–µ–π –æ–±—É—á–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥—Ä–∞—Ñ–∞ –Ω–∞–≤—ã–∫–æ–≤.
"""

print("""
üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞ —Å –ø–æ–ø—ã—Ç–∫–∞–º–∏ —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π

üìã –ß–¢–û –î–ï–õ–ê–ï–¢ –°–ö–†–ò–ü–¢:
   ‚Ä¢ –°–æ–∑–¥–∞–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞: –ö–ª–µ–º–µ–Ω—Ç—å–µ–≤ –ê–ª–µ–∫—Å–µ–π –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á
   ‚Ä¢ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é –æ–±—É—á–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥—Ä–∞—Ñ–∞ –Ω–∞–≤—ã–∫–æ–≤
   ‚Ä¢ –°–æ–∑–¥–∞–µ—Ç –ø–æ–ø—ã—Ç–∫–∏ —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ)
   ‚Ä¢ –ü—Ä–∏–º–µ–Ω—è–µ—Ç BKT –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —É—Ä–æ–≤–Ω–µ–π –æ—Å–≤–æ–µ–Ω–∏—è –Ω–∞–≤—ã–∫–æ–≤
   ‚Ä¢ –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –ª–æ–≥–∏—á–µ—Å–∫—É—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

üéØ –¶–ï–õ–ï–í–û–ô –†–ï–ó–£–õ–¨–¢–ê–¢:
   ‚Ä¢ 12 –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Å–≤–æ–µ–Ω–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤ (—É—Ä–æ–≤–µ–Ω—å ‚â• 0.9)
   ‚Ä¢ 8 —á–∞—Å—Ç–∏—á–Ω–æ –æ—Å–≤–æ–µ–Ω–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤ (—É—Ä–æ–≤–µ–Ω—å 0.3-0.9)
   ‚Ä¢ ~100-150 –ø–æ–ø—ã—Ç–æ–∫ —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π
   ‚Ä¢ –£—Å–ø–µ—à–Ω–æ—Å—Ç—å ~70% (–∏–º–∏—Ç–∞—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è)

‚ö° –ë–´–°–¢–†–´–ô –ó–ê–ü–£–°–ö:

1. –ß–µ—Ä–µ–∑ Django management –∫–æ–º–∞–Ω–¥—É (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
   python manage.py create_student_with_attempts

2. –ß–µ—Ä–µ–∑ Django shell:
   python manage.py shell
   exec(open('mlmodels/tests/create_student_with_attempts.py').read())

3. –° –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
   python manage.py create_student_with_attempts --mastered 15 --partial 10

4. –î–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:
   python manage.py create_student_with_attempts --seed 42

üîß –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –û–ü–¶–ò–ò:
   --recreate     –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞ –µ—Å–ª–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
   --output-dir   –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
   --seed         Seed –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

üìä –ü–†–û–í–ï–†–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–ê:
   ‚Ä¢ –í –∞–¥–º–∏–Ω–∫–µ Django: /admin/student/studentprofile/
   ‚Ä¢ TaskAttempt –º–æ–¥–µ–ª–∏: /admin/mlmodels/taskattempt/
   ‚Ä¢ StudentSkillMastery: /admin/mlmodels/studentskillmastery/

üß™ –ü–†–ï–î–í–ê–†–ò–¢–ï–õ–¨–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:
   python manage.py shell
   exec(open('mlmodels/tests/test_student_creator.py').read())

üíæ –≠–ö–°–ü–û–†–¢ –î–ê–ù–ù–´–•:
   –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ temp_dir/created_student_data.json

‚ö†Ô∏è  –¢–†–ï–ë–û–í–ê–ù–ò–Ø:
   ‚Ä¢ –í –ë–î –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞–≤—ã–∫–∏ (Skill)
   ‚Ä¢ –í –ë–î –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–¥–∞–Ω–∏—è (Task) —Å–æ —Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ –Ω–∞–≤—ã–∫–∞–º–∏
   ‚Ä¢ –ù–∞–≤—ã–∫–∏ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ prerequisite —Å–≤—è–∑–∏

üìñ –ü–û–î–†–û–ë–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø:
   –°–º. —Ñ–∞–π–ª mlmodels/tests/README.md
""")

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã
try:
    import os
    import sys
    import django
    from pathlib import Path
    
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Django
    project_root = Path(__file__).parent.parent.parent
    sys.path.insert(0, str(project_root))
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'adaptive_learning.settings')
    django.setup()
    
    from skills.models import Skill
    from methodist.models import Task
    from django.contrib.auth.models import User
    
    print("\nüîç –ü–†–û–í–ï–†–ö–ê –ì–û–¢–û–í–ù–û–°–¢–ò –°–ò–°–¢–ï–ú–´:")
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–≤—ã–∫–æ–≤
    skills_count = Skill.objects.count()
    print(f"   ‚úì –ù–∞–≤—ã–∫–æ–≤ –≤ –ë–î: {skills_count}")
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–¥–∞–Ω–∏–π
    tasks_count = Task.objects.count()
    tasks_with_skills = Task.objects.filter(skills__isnull=False).distinct().count()
    print(f"   ‚úì –ó–∞–¥–∞–Ω–∏–π –≤ –ë–î: {tasks_count}")
    print(f"   ‚úì –ó–∞–¥–∞–Ω–∏–π —Å–æ —Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ –Ω–∞–≤—ã–∫–∞–º–∏: {tasks_with_skills}")
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–∞
    username = "alex_klementev"
    student_exists = User.objects.filter(username=username).exists()
    print(f"   ‚úì –°—Ç—É–¥–µ–Ω—Ç {username} —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {student_exists}")
    
    if skills_count > 0 and tasks_with_skills > 0:
        print("\nüéâ –°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê –ö –†–ê–ë–û–¢–ï!")
        print("\n‚ñ∂Ô∏è  –ó–ê–ü–£–°–¢–ò–¢–ï –ö–û–ú–ê–ù–î–£:")
        print("   python manage.py create_student_with_attempts")
        
        if student_exists:
            print("\n‚ö†Ô∏è  –î–ª—è –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—É–¥–µ–Ω—Ç–∞ –¥–æ–±–∞–≤—å—Ç–µ --recreate")
    else:
        print("\n‚ùå –°–ò–°–¢–ï–ú–ê –ù–ï –ì–û–¢–û–í–ê:")
        if skills_count == 0:
            print("   ‚Ä¢ –ù–µ—Ç –Ω–∞–≤—ã–∫–æ–≤ –≤ –ë–î")
        if tasks_with_skills == 0:
            print("   ‚Ä¢ –ù–µ—Ç –∑–∞–¥–∞–Ω–∏–π —Å–æ —Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ –Ω–∞–≤—ã–∫–∞–º–∏")
            
except Exception as e:
    print(f"\n‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏: {e}")
    print("   –í–æ–∑–º–æ–∂–Ω–æ, Django –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏")
